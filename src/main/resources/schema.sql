DROP TABLE IF EXISTS Waypoints;

CREATE TABLE IF NOT EXISTS Waypoints
(
    ROUTE_ID    BIGINT NOT NULL,
    ID BIGINT NOT NULL,
    NAME        VARCHAR(128),
    RADIUS      FLOAT DEFAULT 0.1,
    LAT         FLOAT  NOT NULL,
    LON         FLOAT  NOT NULL,
    STBD_XTD    FLOAT DEFAULT 0.1,
    PORT_XTD    FLOAT DEFAULT 0.1,
    LEG_TYPE    INT    NOT NULL,
    SPEED_MIN   FLOAT DEFAULT 5,
    SPEED_MAX   FLOAT DEFAULT 10,
    LEG_NOTE    VARCHAR,
    CONSTRAINT WAYPOINTS_ID PRIMARY KEY (ROUTE_ID, ID),
    CONSTRAINT CHECK_MAX_RADIUS CHECK (RADIUS BETWEEN 0 AND 5),
    CONSTRAINT CHECK_STBD_XTD_LIMITS CHECK (STBD_XTD BETWEEN 0 AND 10),
    CONSTRAINT CHECK_PORT_XTD_LIMITS CHECK (PORT_XTD BETWEEN 0 AND 10),
    CONSTRAINT CHECK_LAT_LIMITS CHECK (LAT BETWEEN -90 AND 90),
    CONSTRAINT CHECK_LON_LIMITS CHECK (LAT BETWEEN -180 AND 180)
);

CREATE TABLE IF NOT EXISTS Routes
(
    ID   BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL,
    NAME VARCHAR                                             NOT NULL
);

INSERT INTO WAYPOINTS (ROUTE_ID, ID, NAME, LAT, LON, LEG_TYPE, LEG_NOTE, RADIUS)
VALUES (1, 1, 'ru.rtz.route', 1, 1, 1, 'qwdwqdw', 2);
INSERT INTO WAYPOINTS (ROUTE_ID, ID, NAME, LAT, LON, LEG_TYPE, LEG_NOTE, RADIUS)
VALUES (1, 2, 'ru.rtz.route', 1, 1, 1, 'qwdwqdw', 2);

INSERT INTO Routes (NAME)
VALUES ('Route 1');